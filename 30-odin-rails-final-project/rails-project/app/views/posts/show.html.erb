<% content_for :title, @post.title %>

<div class="container mt-4">
  <div class="post-show">
    <%= render @post %>

    <div class="comments-section mt-4">
      <h3>Comments</h3>
      <div id="comments">
        <%= render @post.comments %>
      </div>

      <% if policy(Comment).create? %>
        <div class="new-comment mt-4">
          <h4>Add a comment</h4>
          <%= render 'comments/form', comment: Comment.new(post: @post) %>
        </div>
      <% end %>
    </div>

    <div class="post-actions mt-4">
      <%= link_to "Back to posts", posts_path, class: "btn btn-secondary" %>
      <% if policy(@post).edit? %>
        <%= link_to "Edit post", edit_post_path(@post), class: "btn btn-warning" %>
      <% end %>
      <% if policy(@post).destroy? %>
        <%= button_to "Delete post", @post, method: :delete, class: "btn btn-danger", data: { confirm: "Are you sure?" } %>
      <% end %>
    </div>
  </div>
</div>
